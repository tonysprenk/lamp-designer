<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Organic Lamp Designer</title>
  <style>
    html, body { height:100%; margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif; background:#0b0e12; color:#e8eef7; }
    #app { display:grid; grid-template-columns:360px 1fr; height:100%; }
    aside { padding:16px; border-right:1px solid #1b2230; overflow:auto; background:#101620; }
    #canvas { display:block; width:100%; height:100%; }
    h1 { font-size:18px; margin:0 0 8px; color:#cfe0ff; display:flex; gap:8px; align-items:baseline; }
    #version { font-size:12px; color:#8aa4c8; }
    .row { margin:10px 0 16px; }
    label { display:flex; justify-content:space-between; font-size:12px; color:#9bb0cc; margin-bottom:6px; }
    input[type=range], select { width:100%; }
    .note { font-size:11px; color:#8aa4c8; margin-top:10px; }
  </style>

  <script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
      "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/",
      "@app/": "./src/"
    }
  }
  </script>

  <script> window.APP_VERSION = "0.7.8"; </script>
</head>
<body>
<div id="app">
  <aside>
    <h1>Organic Lamp Designer <span id="version"></span></h1>

    <div class="row"><label><span>Height (mm)</span><span id="val_height"></span></label><input id="height" type="range" min="120" max="250" value="230"></div>
    <div class="row"><label><span>Base Radius (mm)</span><span id="val_rbase"></span></label><input id="rbase" type="range" min="40" max="64" value="90"></div>
    <div class="row"><label><span>Top Scale (0.4–1.2)</span><span id="val_topscale"></span></label><input id="topscale" type="range" min="0.4" max="1.2" step="0.01" value="0.70"></div>
    <div class="row"><label><span>Waves</span><span id="val_waves"></span></label><input id="waves" type="range" min="6" max="40" value="18"></div>
    <div class="row"><label><span>Amplitude</span><span id="val_amp"></span></label><input id="amp" type="range" min="0" max="0.35" step="0.01" value="0.22"></div>
    <div class="row"><label><span>Twist (°)</span><span id="val_twist"></span></label><input id="twist" type="range" min="0" max="900" step="10" value="420"></div>
    <div class="row"><label><span>Slot Roll (°)</span><span id="val_slotRoll"></span></label>
  <input id="slotRoll" type="range" min="-90" max="90" step="1" value="0">
</div>
    <div class="row"><label><span>Ripple Direction</span></label>
      <select id="ripdir">
        <option value="vertical" selected>Vertical folds (around)</option>
        <option value="horizontal">Horizontal rings (stacked)</option>
      </select>
    </div>

    <div class="row"><label><span>Mounting</span></label>
    <select id="mount">
        <option value="standing" selected>Standing (bottom cap + E27)</option>
        <option value="hanging">Hanging (top cap + cable + E27)</option>
      </select>
    </div>
<!-- Slot controls (standing mode) -->
<div class="row"><label><span>Slot Angle (°)</span><span id="val_slotAngle"></span></label>
  <input id="slotAngle" type="range" min="0" max="359" value="90">
</div>

<div class="row"><label><span>Slot Width (mm)</span><span id="val_slotWidth"></span></label>
  <input id="slotWidth" type="range" min="4" max="14" step="0.5" value="8">
</div>

<div class="row"><label><span>Slot Length (mm)</span><span id="val_slotLength"></span></label>
  <input id="slotLength" type="range" min="0" max="160" step="1" value="0">
</div>

<div class="row"><label><span>Slot Overshoot (mm)</span><span id="val_slotOvershoot"></span></label>
  <input id="slotOvershoot" type="range" min="0" max="5" step="0.1" value="1.0">
</div>

<div class="row"><label><span>Slot Offset @ Hole (mm)</span><span id="val_slotOffset"></span></label>
  <input id="slotOffset" type="range" min="-3" max="3" step="0.1" value="0">
</div>
    <div class="row">
  <label><span>Mouth Rotation (°)</span><span id="val_slotMouth"></span></label>
  <input id="slotMouth" type="range" min="-180" max="180" step="1" value="0">
</div>

<div class="row">
  <label style="justify-content:flex-start; gap:8px;">
    <input id="slotDebug" type="checkbox"> Show slot debug guides
  </label>
</div>
    <div class="row"><label><span>Finish</span></label>
      <select id="finish">
        <option value="opaque_white" selected>Opaque white (gloss)</option>
        <option value="translucent_white">Translucent white (gloss)</option>
        <option value="bronze">Bronze (polished)</option>
        <option value="silver">Silver (polished)</option>
        <option value="gold">Gold (polished)</option>
      </select>
    </div>

    <div class="row"><label><span>Preview Quality</span></label>
      <select id="res">
        <option value="low">Low (fast)</option>
        <option value="med" selected>Medium</option>
        <option value="high">High</option>
      </select>
    </div>

    <div class="note">Bambu X1C-safe (256³ mm). Vase-mode preview; internal ~0.7 mm wall for manufacturing. E27 hole fixed.</div>
  </aside>
  <canvas id="canvas"></canvas>
</div>

<script type="module">
  import "@app/main.js";
</script>
</body>
</html>
